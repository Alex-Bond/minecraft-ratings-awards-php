{"name":"Скрипт для получения бонуса за голосование на MC TOP.","tagline":"","body":"Описание\r\n----------------------\r\nДанный скрипт был специально разработан для администраторов серверов, которые хотят поощрять своих игроков за голосование за них на mctop.su.\r\n\r\nНастройка\r\n----------------------\r\nДля того чтобы настроить данный скрипт вам понадобится настроить для начала твой профиль на MC Top. Для этого войти в контрольную панель своего сервера в топе и укажи в разделе \"Данные\" секретное слово и путь к данном скрипту.\r\n\r\nДалее нам понадобится настроить сам скрипт. Все настройки хранятся в массиве $config. Его структура фиксированная и не может подвергаться изменениям со стороны человека слабо понимающего принцип работы скрипта.\r\n\r\nМассив состоит из:\r\n<table>\r\n  <tr>\r\n    <th>Название</th><th>Функционал</th>\r\n  </tr>\r\n  <tr>\r\n    <td>db</td><td>Настройки базы данных</td>\r\n  </tr>\r\n  <tr>\r\n    <td>security-code</td><td>Секретное слово из панели управления</td>\r\n  </tr>\r\n  <tr>\r\n    <td>jobs</td><td>Задачи для выполнения</td>\r\n  </tr>\r\n</table>\r\n\r\nКак ты заметил - есть некое поле \"jobs\" в котором указываются задачи для выполнения. Иными словами - можно делать при голосовании несколько действий сразу. Например, добавить денег игроку и добавить в какую-то табличку запись о голосовании.\r\n\r\nНастройка jobs\r\n----------------------\r\n\r\nДля начала рассмотрим настройки задач:\r\n\r\n*Jobs*\r\n<table>\r\n  <tr>\r\n    <th>Название</th><th>Функционал</th><th>Формат</th><th>Значение по-умолчанию</th>\r\n  </tr>\r\n  <tr>\r\n    <td>active</td><td>Включает выполнение данной задачи</td><td>boolean</td><td>true</td>\r\n  </tr>\r\n  <tr>\r\n    <td>stable-name</td><td>Название таблички которую правим</td><td>string</td><td>iConomy</td>\r\n  </tr>\r\n  <tr>\r\n    <td>type</td><td>Тип задачи (расшифровка в табличке ниже).</td><td>int</td><td>0</td>\r\n  </tr>\r\n  <tr>\r\n    <td>advanced</td><td>Использовать ли ручное указание всех полей для изменения при type=4</td><td>boolean</td><td>false</td>\r\n  </tr>\r\n  <tr>\r\n    <td>fields</td><td>Массив полей для изменения при включенном режиме \"advanced\". {player} в значении поля будет заменено на имя игрока который проголосовал.</td><td>array</td><td>array('username' => '{player}','item' => '1','item-count' => 64)</td>\r\n  </tr>\r\n  <tr>\r\n    <td>change-column</td><td>Поле которое изменяем при всех случаях в режиме advanced=false</td><td>string</td><td>balance</td>\r\n  </tr>\r\n  <tr>\r\n    <td>user-column</td><td>Поле в котором ищется игрок при всех случаях в режиме advanced=false</td><td>string</td><td>balance</td>\r\n  </tr>\r\n  <tr>\r\n    <td>default</td><td>Стандартное значение поля \"change-column\" если поиск по \"user-column\" не дал результатов</td><td>int</td><td>30</td>\r\n  </tr>\r\n  <tr>\r\n    <td>change</td><td>Сколько добавлять к \"change-column\". Например, пополнение счета на 500 рублей будет происходить если тут указать 500</td><td>string/int</td><td>1</td>\r\n  </tr>\r\n</table>\r\n\r\n*Type*\r\n<table>\r\n    <tr>\r\n        <th>Значение</th><th>Функционал</th>\r\n    </tr>\r\n    <tr>\r\n        <td>0</td><td>Попытка добавления \"change\" к значению \"change-column\". Если юзер не найден в базе - ничего не делаем.</td>\r\n    </tr>\r\n    <tr>\r\n        <td>1</td><td>Попытка добавления \"change\" к значению \"change-column\". Если юзер не найден в базе - добавляем новую запись с значением \"default\" + \"change\".</td>\r\n    </tr>\r\n    <tr>\r\n        <td>2</td><td>Выставления значения поля \"change-column\" на \"change\". Если юзер не найден в базе - ничего не делаем.</td>\r\n    </tr>\r\n    <tr>\r\n        <td>3</td><td>Выставления значения поля \"change-column\" на \"change\". Если юзер не найден в базе - добавляем новую запись.</td>\r\n    </tr>\r\n    <tr>\r\n        <td>4</td><td>Вставка новой записи</td>\r\n    </tr>\r\n</table>\r\n\r\nРассмотрим несколько вариантов ситуаций.\r\n\r\n *[1] Добавление денег в табличку iConomy.*\r\n<pre><code>array(\r\n    'active' => true,\r\n    'table-name' => 'iConomy',\r\n    'type' => 0,\r\n    'change-column' => 'balance',\r\n    'user-column' => 'username',\r\n    'change' => 1\r\n)\r\n</code></pre>\r\n\r\n *[2] Добавление денег в табличку iConomy. Если игрок не найден - создаем новую запись.*\r\n<pre><code>array(\r\n    'active' => true,\r\n    'table-name' => 'iConomy',\r\n    'type' => 1,\r\n    'change-column' => 'balance',\r\n    'user-column' => 'username',\r\n    'default' => 30,\r\n    'change' => 1\r\n)\r\n</code></pre>\r\n\r\n *[3] Выставление значения поля group в значение \"voted\" в табличке \"users-groups\"*\r\n<pre><code>array(\r\n    'active' => true,\r\n    'table-name' => 'users-groups',\r\n    'type' => 2,\r\n    'change-column' => 'group',\r\n    'user-column' => 'username',\r\n    'change' => 'voted'\r\n)\r\n</code></pre>\r\n\r\n *[4] Выставление значения поля group в значение \"voted\" в табличке \"users-groups\" или добавление если юзер не найден.*\r\n<pre><code>array(\r\n    'active' => true,\r\n    'table-name' => 'users-groups',\r\n    'type' => 3,\r\n    'change-column' => 'group',\r\n    'user-column' => 'username',\r\n    'change' => 'voted'\r\n)\r\n</code></pre>\r\n\r\n *[5] Добавление в таблицу \"votes\" запись о голосовании. Обычный режим. В поле \"portal\" вписываем заначение \"mctop\"*\r\n<pre><code>array(\r\n    'active' => true,\r\n    'table-name' => 'votes',\r\n    'type' => 4,\r\n    'change-column' => 'portal',\r\n    'user-column' => 'username',\r\n    'change' => 'mctop'\r\n)\r\n</code></pre>\r\n\r\n *[6] Добавление в таблицу \"votes\" запись о голосовании. Расширенный режим. Добавление записи для выдачи предметов (плагин отдельно ищи).*\r\n<pre><code>array(\r\n    'active' => true,\r\n    'table-name' => 'items',\r\n    'type' => 4,\r\n    'advanced' => true,\r\n    'fields' => array(\r\n        'username' => '{player}',\r\n        'item' => '1',\r\n        'item-count' => 64\r\n    ),\r\n)\r\n</code></pre>\r\n\r\nКомплексный пример настройки\r\n----------------------\r\n\r\nПри голосовании выполняем действия 1, 3 и 6 из выше указанного списка.\r\n<pre><code>$config = array(\r\n    'db' => array(\r\n        'driver' => 'mysql',\r\n        'host' => 'localhost',\r\n        'username' => 'root',\r\n        'password' => '',\r\n        'database' => 'minecraft',\r\n    ),\r\n    'security-code' => '',\r\n    'jobs' => array(\r\n        array(\r\n            'active' => true,\r\n            'table-name' => 'iConomy',\r\n            'type' => 0,\r\n            'change-column' => 'balance',\r\n            'user-column' => 'username',\r\n            'change' => 1\r\n        ),\r\n        array(\r\n            'active' => true,\r\n            'table-name' => 'users-groups',\r\n            'type' => 3,\r\n            'change-column' => 'group',\r\n            'user-column' => 'username',\r\n            'change' => 'voted'\r\n        ),\r\n        array(\r\n            'active' => true,\r\n            'table-name' => 'items',\r\n            'type' => 4,\r\n            'advanced' => true,\r\n            'fields' => array(\r\n                'username' => '{player}',\r\n                'item' => '1',\r\n                'item-count' => 64\r\n            )\r\n        )\r\n    )\r\n</code></pre>\r\n\r\n![MC Talk](http://mctalk.org/public/style_images/mctalk/other/logo-small.png)\r\n\r\nПоддержка скрипта осуществляется на портале MC Talk - http://mctalk.org/topic/11-mctop-php-bonusi-prodvinutoe-reshenie/ ","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}